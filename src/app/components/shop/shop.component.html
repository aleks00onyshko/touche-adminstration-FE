<mat-drawer-container class="shop-container">
  <mat-drawer class="sidenav" mode="side" opened>
    <mat-card>Integration</mat-card>
  </mat-drawer>

  <mat-drawer-content class="content">
    <app-categories
      [categories]="(shopStore.categories$ | async)!"
      [selectedCategory]="(shopStore.selectedCategory$ | async)!"
      [compareMode]="(shopStore.compareMode$ | async)!"
      (selectCategory)="shopStore.categorySelected$($event)"
      (changeCategoryName)="shopStore.updateCategoryName$($event)"
      (createCategory)="shopStore.createCategory$($event)"
      (createTempCategory)="shopStore.createTempCategory$()"
    ></app-categories>

    <app-spinner *ngIf="shopStore.loading$ | async; else content"></app-spinner>

    <ng-template #content>
      <p *ngIf="(shopStore.categories$ | async)!.length === 0; else content">You don't have any categories!</p>

      <ng-template #content>
        <app-products
          [products]="(shopStore.selectedCategory$ | async)!.products"
          [compareMode]="(shopStore.compareMode$ | async)!"
          (uploadImageForProduct)="shopStore.uploadImageForProduct$($event)"
          (createProduct)="shopStore.createProduct$($event)"
          (updateProduct)="shopStore.updateProduct$($event)"
          (deleteProduct)="shopStore.deleteProduct$($event)"
        ></app-products>

        <app-compare-button
          [compareMode]="(shopStore.compareMode$ | async)!"
          (compareModeToggled)="shopStore.setcompareMode($event)"
        ></app-compare-button>
      </ng-template>
    </ng-template>
  </mat-drawer-content>
</mat-drawer-container>
